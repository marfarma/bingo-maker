/** * Created by IntelliJ IDEA. * User: rdclark * Date: Oct 30, 2010 * Time: 12:07:23 PM * To change this template use File | Settings | File Templates. */function buildCards() {    var values = getValuesFromForm();	var div =  $('#cards').empty();    for (var i=1; i<=values.numCards; i++) {		var size = values.size;        var winner = Math.random() * 100 <= values.winningPercent;		var b = board({size:size, isWinningCard:winner, correctValues:values.correctValues, incorrectValues:values.incorrectValues});		var renderedCard = buildTable(size, b.get_cells(),'ID Theft Bingo',i);		div.append(renderedCard);	}}function getValuesFromForm() {    var size = $('#sizeMenu').val() * 1; // multiply by 1 to get a number    var numCards = $('#numCards').val() * 1;    var winningPercent = $('#winningPercent').val() * 1;    var correctValues = extractStrings($('#correctValues').val());    var incorrectValues = extractStrings($('#incorrectValues').val());    return {size:size, numCards:numCards, winningPercent:winningPercent, correctValues:correctValues, incorrectValues:incorrectValues};}function extractStrings(textAreaValue) {   var strings = textAreaValue.split('\n');   var result = strings.map(function (s) { return s.replace(/^\s\s*/, '').replace(/\s\s*$/, '')});   result = result.filter(function (s) {return s.length > 0});   return result;}function buildTable(numCols, cells,title,serialNumber) {	var rows = [];	for (var rowNum=0;rowNum<numCols;rowNum++) {		var probe = rowNum * numCols;		var rowCells = cells.slice(probe, probe+numCols);        rows.push({cells:rowCells})	}    return ich.cardTemplate({title:title, rows:rows, serialNumber:serialNumber});}